# EPCalendar

A calendar displayed on electronic paper.

Currently, it supports display in Japanese and shows Japanese national holidays.

## Overview

1. Start the server
2. When the server is accessed, it returns an image of the rendered calendar
3. On the client side (electronic paper), once the date changes, the client fetches the image from the server
4. The client displays the fetched image on the electronic paper

## Required Equipment

- Electronic Paper: Waveshare 7.3inch e-Paper HAT (F)
- Raspberry Pi 4 or 5

It may also work with other combinations, but likely requires modifications to the source code.

## Development

### Server Side

Developed with Node.js 23.5.0.  
The calendar is generated by React on Next.js, and then Puppeteer is used to take a screenshot and produce the image.  
Dithering is applied to convert it into colors that can be displayed on electronic paper, and the image is returned as a PNG.

After cloning this repository:

```bash
cd server
yarn
```

Then run:

```bash
yarn dev
```

to start the server at `http://localhost:3000`.

- Calendar image display:
  - Dithered:
    - Monday start: <http://localhost:3000/api/getImage>
    - Sunday start: <http://localhost:3000/api/getImage?start=sunday>
  - Original:
    - Monday start: <http://localhost:3000/api/getImage?origin=1>
    - Sunday start: <http://localhost:3000/api/getImage?start=sunday&origin=1>
- Calendar HTML display:
  - Monday start: <http://localhost:3000/calendar>
  - Sunday start: <http://localhost:3000/calendar?start=sunday>

## Client Side

Not yet.
